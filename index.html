<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pembukuan Sederhana</title>

  <style>
    :root {
      --bg: #f4f6f8;
      --card: #ffffff;
      --primary: #2563eb;
      --success: #16a34a;
      --danger: #dc2626;
      --text: #1f2937;
      --muted: #6b7280;
      --radius: 14px;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      padding: 16px;
    }

    h1 {
      font-size: 20px;
      margin-bottom: 12px;
      text-align: center;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,.06);
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    label {
      font-size: 13px;
      color: var(--muted);
    }

    input, select, button {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      font-size: 14px;
    }

    button {
      background: var(--primary);
      color: #fff;
      border: none;
      font-weight: 600;
      cursor: pointer;
    }

    button.danger {
      background: var(--danger);
    }

    .summary {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
    }

    .box {
      padding: 12px;
      border-radius: 12px;
      background: #f9fafb;
    }

    .box h3 {
      font-size: 12px;
      margin: 0;
      color: var(--muted);
    }

    .box p {
      margin: 6px 0 0;
      font-size: 16px;
      font-weight: 700;
    }

    .in { color: var(--success); }
    .out { color: var(--danger); }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid #e5e7eb;
    }

    th {
      color: var(--muted);
    }

    footer {
      margin-top: 24px;
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      opacity: 0.8;
    }

    @media (min-width: 640px) {
      body {
        max-width: 480px;
        margin: auto;
      }
    }
  </style>
</head>

<body>

<h1>Pembukuan Sederhana</h1>

<div class="card">
  <div class="grid">
    <div>
      <label>Saldo Awal</label>
      <input type="number" id="saldoAwal" />
    </div>

    <div>
      <label>Tanggal</label>
      <input type="date" id="tanggal" />
    </div>

    <div>
      <label>Jenis Transaksi</label>
      <select id="jenis">
        <option value="credit">Credit (Masuk)</option>
        <option value="debit">Debit (Keluar)</option>
        <option value="piutang">Piutang</option>
        <option value="bayar">Bayar Hutang</option>
      </select>
    </div>

    <div>
      <label>Nominal</label>
      <input type="number" id="nominal" />
    </div>

    <div>
      <label>Keterangan</label>
      <input type="text" id="keterangan" />
    </div>

    <button id="btnTambah">Tambah Transaksi</button>
    <button class="danger" onclick="resetData()">Reset Semua Data</button>
  </div>
</div>

<div class="card">
  <div class="summary">
    <div class="box">
      <h3>Saldo Akhir</h3>
      <p id="saldoAkhir">Rp 0</p>
    </div>
    <div class="box">
      <h3>Piutang</h3>
      <p id="totalPiutang">Rp 0</p>
    </div>
    <div class="box">
      <h3>Aset</h3>
      <p id="aset">Rp 0</p>
    </div>
  </div>
</div>

<div class="card">
  <table>
    <thead>
      <tr>
        <th>Tanggal & Ket</th>
        <th>Jenis</th>
        <th>Nominal</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody id="list"></tbody>
  </table>
</div>

<footer>
  Developed by <strong>Mulya.id</strong>
</footer>

<script>
let saldo = 0;
let piutang = 0;
let transaksi = [];

const format = n => 'Rp ' + n.toLocaleString('id-ID');

function save() {
  localStorage.setItem('pembukuan', JSON.stringify({ saldo, piutang, transaksi }));
}

function load() {
  const d = JSON.parse(localStorage.getItem('pembukuan'));
  if (!d) return;
  saldo = d.saldo;
  piutang = d.piutang;
  transaksi = d.transaksi;
  document.getElementById('saldoAwal').disabled = true;
  render();
}

function render() {
  const list = document.getElementById('list');
  list.innerHTML = '';
  transaksi.forEach((t,i)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${t.tanggal}<br><small>${t.ket}</small></td>
      <td>${t.jenis}</td>
      <td>${format(t.nominal)}</td>
      <td><button onclick="hapus(${i})">Hapus</button></td>
    `;
    list.appendChild(tr);
  });

  document.getElementById('saldoAkhir').innerText = format(saldo);
  document.getElementById('totalPiutang').innerText = format(piutang);
  document.getElementById('aset').innerText = format(saldo - piutang);
}

document.getElementById('btnTambah').onclick = () => {
  const jenis = jenisEl.value;
  const nominal = +nominalEl.value;
  if (!nominal) return alert('Nominal wajib');

  if (!saldo && saldoAwal.value) {
    saldo = +saldoAwal.value;
    saldoAwal.disabled = true;
  }

  if (jenis === 'credit') saldo += nominal;
  if (jenis === 'debit') saldo -= nominal;
  if (jenis === 'piutang') piutang += nominal;
  if (jenis === 'bayar') {
    if (nominal > piutang) return alert('Melebihi piutang');
    piutang -= nominal;
  }

  transaksi.push({
    tanggal: tanggal.value,
    jenis,
    nominal,
    ket: keterangan.value
  });

  save();
  render();
  nominalEl.value = '';
  keterangan.value = '';
};

function hapus(i) {
  const t = transaksi[i];
  if (t.jenis === 'credit') saldo -= t.nominal;
  if (t.jenis === 'debit') saldo += t.nominal;
  if (t.jenis === 'piutang') piutang -= t.nominal;
  if (t.jenis === 'bayar') piutang += t.nominal;

  transaksi.splice(i,1);
  save();
  render();
}

function resetData() {
  if (!confirm('Reset semua data?')) return;
  localStorage.removeItem('pembukuan');
  location.reload();
}

const saldoAwal = document.getElementById('saldoAwal');
const jenisEl = document.getElementById('jenis');
const nominalEl = document.getElementById('nominal');
const keterangan = document.getElementById('keterangan');
const tanggal = document.getElementById('tanggal');

tanggal.value = new Date().toISOString().split('T')[0];
load();
</script>

</body>
</html>
